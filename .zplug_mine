# vi: ft=zsh

source ~/.zplug/init.zsh

#zplug 'zplug/zplug', hook-build:'zplug --self-manage'

# prezto
zplug "modules/autosuggestions", from:prezto
zplug "modules/completion", from:prezto
zplug "modules/directory", from:prezto
zplug "modules/editor", from:prezto
zplug "modules/environment", from:prezto
zplug "modules/git", from:prezto
zplug "modules/history", from:prezto
zplug "modules/history-substring-search/", from:prezto
#zplug "modules/node", from:prezto
zplug "modules/python", from:prezto
#zplug "modules/ruby", from:prezto
zplug "modules/utility", from:prezto

zplug "plugins/terraform", from:oh-my-zsh, if:"[[ $(command -v terraform) ]]"
zplug "johanhaleby/kubetail", if:"[[ $(command -v kubectl) ]]"

zplug "Meroje/zsh-nvm"
zplug "Meroje/zsh-rbenv"

# Set the priority when loading
# e.g., zsh-syntax-highlighting must be loaded
# after executing compinit command and sourcing other plugins
# (If the defer tag is given 2 or above, run after compinit command)
zplug "modules/syntax-highlighting", from:prezto, defer:2

# Can manage local plugins
zplug "~/.zsh", from:local

# Load theme file
#zplug 'bhilburn/powerlevel9k', as:theme
zplug 'dritter/powerlevel9k', \
    at:async_all_the_segments, \
    as:theme

# Install plugins if there are plugins that have not been installed
if ! zplug check --verbose; then
    printf "Install? [y/N]: "
    if read -q; then
        echo; zplug install
    fi
fi

zstyle ':prezto:module:git:alias' skip 'yes'

# Then, source plugins and add commands to $PATH
zplug load #--verbose

path=(
  ${ZPLUG_BIN:+"$ZPLUG_BIN"}
  "$path[@]"
)
